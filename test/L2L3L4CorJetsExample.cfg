#
#  Example of running L2 (eta), L3 (pt), and L4 (EMF) corrections derived from the CMSSW_1_5_2 QCD sample.
#
process JetPlots = {
    
 source = PoolRASource { 
    untracked vstring fileNames = {'file:/uscms_data/d1/cmsjtmet/kkousour/large/Compressed_sample11.root'}
  }	    
  untracked PSet maxEvents = {untracked int32 input = 1000}

   es_source L2JetCorrectorIcone5 = L2RelativeCorrectionService {
            string tagName = 'CMSSW_152_L2Relative_iterativeCone5'
            string label = 'L2RelativeJetCorrectorIcone5'
    }

   es_source L3JetCorrectorIcone5 = L3AbsoluteCorrectionService {
            string tagName = 'CMSSW_152_L3Absolute_iterativeCone5'
            string label = 'L3AbsoluteJetCorrectorIcone5'
    }

   es_source L4EMFJetCorrectorIcone5 = L4EMFCorrectionService {
            string tagName = 'CMSSW_152_L4EMF'
            string label = 'L4EMFJetCorrectorIcone5' 
    }

   # Pick MCJetCorrectionService to set record's IOV
   es_prefer L2JetCorrectorIcone5 = L2RelativeCorrectionService {}

   module L2JetCorJetIcone5 = JetCorrectionProducer {
          InputTag src   = iterativeCone5CaloJets
          vstring correctors = {"L2RelativeJetCorrectorIcone5"}
          untracked string alias = "L2JetCorJetIcone5"
   }

   module L3JetCorJetIcone5 = JetCorrectionProducer {
          InputTag src   = L2JetCorJetIcone5
          vstring correctors = {"L3AbsoluteJetCorrectorIcone5"}
          untracked string alias = "L3JetCorJetIcone5"
   }
  
   module L4JetCorJetIcone5 = JetCorrectionProducer {
                InputTag src   = L3JetCorJetIcone5
                vstring correctors = {"L4EMFJetCorrectorIcone5"}
                untracked string alias = "L4JetCorJetIcone5"
        }

   module plots = JetPlotsExample {
          string CaloJetAlgorithm ="L4JetCorJetIcone5"
          string GenJetAlgorithm = "iterativeCone5GenJets"
  }

  path p = {L2JetCorJetIcone5,L3JetCorJetIcone5,L4JetCorJetIcone5,plots}
}
